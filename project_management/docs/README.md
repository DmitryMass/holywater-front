# Документация билдера главного экрана мобильного приложения

## Обзор проекта

Данный проект представляет собой административную панель (frontend), которая позволяет управлять конфигурациями главного экрана мобильного приложения. Администратор может создавать, редактировать и управлять макетами главного экрана, которые затем экспортируются в формате JSON и передаются мобильному приложению.

## Технический стек

- **TypeScript** - основной язык программирования
- **React** - библиотека для создания UI
- **React Router DOM** - для навигации
- **TailwindCSS** - для стилизации
- **DaisyUI** - компонентная библиотека
- **@dnd-kit/core** - библиотека для реализации функционала drag-and-drop
- **React Hook Form** - для работы с формами

## Архитектура приложения

### Структура проекта

```
src/
├── components/         # Переиспользуемые компоненты
│   ├── ui/             # Базовые UI компоненты
│   ├── builder/        # Компоненты для билдера
│   └── preview/        # Компоненты для превью
├── hooks/              # Кастомные хуки
│   ├── useScreenConfig/  # Хуки для работы с конфигурацией экрана
│   └── useApi/         # Хуки для работы с API (заглушки)
├── pages/              # Страницы приложения
├── types/              # TypeScript типы
├── utils/              # Утилиты
└── services/           # Сервисы для работы с данными
```

### Основные модули

1. **Редактор конфигураций** - интерфейс для создания и редактирования конфигураций экрана
2. **Менеджер секций** - интерфейс для управления различными типами секций и их содержимым
3. **Превью JSON** - компонент для предварительного просмотра JSON-данных
4. **Превью мобильного приложения** - компонент для визуализации того, как конфигурация будет выглядеть в мобильном приложении
5. **Менеджер сохранений** - функционал для сохранения конфигураций

## Модель данных

### Структура JSON для конфигурации главного экрана

```typescript
interface ScreenConfig {
  id: string;
  name: string;
  sections: Section[];
}

interface Section {
  id: string;
  type: 'banner' | 'verticalList' | 'horizontalList' | 'tabs' | 'grid';
  title?: string;
  items: Item[];
  settings?: SectionSettings;
}

interface Item {
  id: string;
  type: 'image' | 'text' | 'button' | 'product' | 'category';
  content: {
    title?: string;
    subtitle?: string;
    imageUrl?: string;
    actionUrl?: string;
    // Другие свойства в зависимости от типа
  };
}

interface SectionSettings {
  backgroundColor?: string;
  padding?: string;
  // Другие возможные настройки
}
```

## Функциональность

### Управление конфигурациями

- Создание новой конфигурации
- Редактирование существующей конфигурации
- Удаление конфигурации
- Копирование конфигурации

### Редактор секций

- Добавление новых секций различных типов
- Редактирование содержимого секций
- Изменение порядка секций (drag-and-drop)
- Удаление секций

### Редактор элементов

- Добавление элементов в секцию
- Редактирование свойств элементов
- Изменение порядка элементов внутри секции (drag-and-drop)
- Удаление элементов

### Предварительный просмотр

- Просмотр сгенерированного JSON
- Визуальный предпросмотр конфигурации (как она будет выглядеть в мобильном приложении)

## API (заглушки)

Для взаимодействия с будущим бэкендом будут реализованы следующие API-заглушки:

- `GET /api/screen-configs` - получение списка конфигураций
- `GET /api/screen-configs/:id` - получение конкретной конфигурации
- `POST /api/screen-configs` - создание новой конфигурации
- `PUT /api/screen-configs/:id` - обновление существующей конфигурации
- `DELETE /api/screen-configs/:id` - удаление конфигурации

## Пользовательский интерфейс

### Макет админ-панели

Админ-панель будет иметь следующую структуру:

1. **Верхняя панель** - содержит:

   - Название приложения
   - Кнопки управления конфигурациями (создать, сохранить и т.д.)

2. **Левая панель** - содержит:

   - Список доступных типов секций
   - Палитру компонентов, которые можно перетаскивать

3. **Основная область** - содержит:

   - Редактор конфигурации с возможностью drag-and-drop
   - Визуализацию текущей конфигурации

4. **Правая панель** - содержит:
   - Редактор свойств выбранного элемента или секции
   - Вкладку с предпросмотром JSON

## Дальнейшие улучшения

- Добавление возможности импорта/экспорта конфигураций
- Поддержка версионирования конфигураций
- Добавление возможности предпросмотра на разных устройствах (телефон, планшет)
- Интеграция с системой управления контентом
